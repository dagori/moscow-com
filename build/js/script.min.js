"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],l=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(l=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);l=!0);}catch(e){r=!0,o=e}finally{try{l||null==i.return||i.return()}finally{if(r)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var openButton=document.querySelector(".registration-button"),popup=document.querySelector(".reg-popup"),closeButton=document.querySelector(".reg-popup__close"),overlay=document.querySelector(".overlay"),form=document.querySelector(".reg-form"),requiredForm=document.querySelector(".reg-form__required"),optionalForm=document.querySelector(".reg-form__optional"),fields=form.getElementsByTagName("input"),nextButton=form.querySelector(".reg-form__next"),ENTER=13;function changeButtonAccess(){var e=[].every.call(fields,function(e){return e.validity.valid});nextButton.disabled=!e}nextButton.addEventListener("click",function(e){e.preventDefault(),requiredForm.style.display="none",optionalForm.style.display="flex"}),openButton.addEventListener("click",function(){overlay.style.display="block",popup.style.display="flex"}),closeButton.addEventListener("click",function(){requiredForm.style.display="block",optionalForm.style.display="none",overlay.style.display="none",popup.style.display="none"});var post=document.getElementById("email"),nickName=document.getElementById("nick-name"),agreement=document.getElementById("agreement"),password_1=document.getElementById("password-1"),password_2=document.getElementById("password-2"),rulesBlock=document.querySelectorAll(".form-requirement__rule-block");function ruleValid(e,t){rulesBlock[e].children[t].classList.add("ok"),rulesBlock[e].children[t].classList.remove("error")}function ruleInvalid(e,t){rulesBlock[e].children[t].classList.remove("ok"),rulesBlock[e].children[t].classList.add("error")}agreement.addEventListener("change",function(){changeButtonAccess()}),document.addEventListener("keydown",function(e){agreement.nextElementSibling===document.activeElement&&e.keyCode===ENTER&&(agreement.checked=!agreement.checked,changeButtonAccess())}),post.addEventListener("change",function(){post.checkValidity()?rulesBlock[0].nextElementSibling.style.display="none":rulesBlock[0].nextElementSibling.style.display="block",changeButtonAccess()});var firstStep={name:!1,password:!1};nickName.addEventListener("input",function(){2<=nickName.value.length&&(firstStep.name=!0),firstStep.name&&(3<=nickName.value.length?ruleValid(1,0):ruleInvalid(1,0),/^[a-z_;0-9]*$/i.test(nickName.value)&&nickName.value.length?ruleValid(1,1):ruleInvalid(1,1),/[a-z]/i.test(nickName.value[0])&&nickName.value.length?ruleValid(1,2):ruleInvalid(1,2)),changeButtonAccess()}),password_1.addEventListener("input",function(){2<=password_1.value.length&&(firstStep.password=!0),firstStep.password&&(6<=password_1.value.length?ruleValid(2,0):ruleInvalid(2,0),/[0-9]+/.test(password_1.value)?ruleValid(2,1):ruleInvalid(2,1),/(?=.*[a-z|а-я])(?=.*[A-Z|А-Я]).*$/.test(password_1.value)?ruleValid(2,2):ruleInvalid(2,2),password_1.value===nickName.value||password_1.value===post.value?rulesBlock[2].nextElementSibling.style.display="block":rulesBlock[2].nextElementSibling.style.display="none"),changeButtonAccess()}),password_2.addEventListener("input",function(){password_2.value!=password_1.value?rulesBlock[3].nextElementSibling.style.display="block":rulesBlock[3].nextElementSibling.style.display="none",changeButtonAccess()}),form.addEventListener("submit",function(e){e.preventDefault();var t={},n=new FormData(form),l=!0,r=!1,o=void 0;try{for(var a,i=n.entries()[Symbol.iterator]();!(l=(a=i.next()).done);l=!0){var s=_slicedToArray(a.value,2),u=s[0],c=s[1];"subscription"===u&&t[u]?t[u]=(t[u]+", "+c).split(","):t[u]=c}}catch(e){r=!0,o=e}finally{try{l||null==i.return||i.return()}finally{if(r)throw o}}console.log(JSON.stringify(t)),popup.style.display="none",overlay.style.display="none",openButton.disabled=!0});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJvcGVuQnV0dG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicG9wdXAiLCJjbG9zZUJ1dHRvbiIsIm92ZXJsYXkiLCJmb3JtIiwicmVxdWlyZWRGb3JtIiwib3B0aW9uYWxGb3JtIiwiZmllbGRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJuZXh0QnV0dG9uIiwiRU5URVIiLCJpdGVtIiwidmFsaWRpdHkiLCJ2YWxpZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY2hhbmdlQnV0dG9uQWNjZXNzIiwic3RhdHVzIiwiZGlzcGxheSIsImNhbGwiLCJzdHlsZSIsImRpc2FibGVkIiwiZ2V0RWxlbWVudEJ5SWQiLCJhZ3JlZW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicnVsZSIsInJ1bGVzQmxvY2siLCJibG9jayIsImNoaWxkcmVuIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwibmlja05hbWUiLCJwYXNzd29yZF8xIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiYWN0aXZlRWxlbWVudCIsImtleUNvZGUiLCJydWxlSW52YWxpZCIsImNoZWNrZWQiLCJwb3N0IiwiY2hlY2tWYWxpZGl0eSIsIm5hbWUiLCJwYXNzd29yZCIsImZpcnN0U3RlcCIsInZhbHVlIiwibGVuZ3RoIiwicnVsZVZhbGlkIiwicmVnRmlyc3RTeW1ib2wiLCJyZWdTdHJpbmciLCJ0ZXN0IiwicGFzc3dvcmRfMiIsInJlZ0xldHRlciIsInJlc3VsdCIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiZGF0YSIsImVudHJpZXMiLCJTeW1ib2wiLCJpdGVyYXRvciIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24iLCJuZXh0IiwiZG9uZSIsIl9zdGVwJHZhbHVlIiwiX3NsaWNlZFRvQXJyYXkiLCJrZXkiLCJzcGxpdCIsInByZXZlbnREZWZhdWx0Iiwic3RyaW5naWZ5IiwiRm9ybURhdGEiXSwibWFwcGluZ3MiOiJtbkJBQUEsSUFBTUEsV0FBYUMs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ZixRQUFPaUIsTUFBUEYsUUFBQSxPQUNBcEIsV0FBV3VCLFVBQUkrQyIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgb3BlbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZWdpc3RyYXRpb24tYnV0dG9uJyk7XHJcbmNvbnN0IHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlZy1wb3B1cCcpO1xyXG5jb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZWctcG9wdXBfX2Nsb3NlJyk7XHJcbmNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3ZlcmxheScpO1xyXG5jb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlZy1mb3JtJyk7XHJcbmNvbnN0IHJlcXVpcmVkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZWctZm9ybV9fcmVxdWlyZWQnKTtcclxuY29uc3Qgb3B0aW9uYWxGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlZy1mb3JtX19vcHRpb25hbCcpO1xyXG5jb25zdCBmaWVsZHMgPSBmb3JtLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpO1xyXG5jb25zdCBuZXh0QnV0dG9uID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcucmVnLWZvcm1fX25leHQnKTtcclxuY29uc3QgRU5URVIgPSAxMztcclxuXHJcbm5leHRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICByZXF1aXJlZEZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICBvcHRpb25hbEZvcm0uc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxufSk7XHJcblxyXG5mdW5jdGlvbiBjaGFuZ2VCdXR0b25BY2Nlc3MoKSB7XHJcbiAgdmFyIHN0YXR1cyA9IFtdLmV2ZXJ5LmNhbGwoZmllbGRzLCBpdGVtID0+IGl0ZW0udmFsaWRpdHkudmFsaWQpO1xyXG4gIGlmKHN0YXR1cykge1xyXG4gICAgbmV4dEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBuZXh0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcbn1cclxuXHJcbm9wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICBwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG59KTtcclxuXHJcbmNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHJlcXVpcmVkRm9ybS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICBvcHRpb25hbEZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgcG9wdXAuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxufSk7XHJcblxyXG4vKlZhbGlkYXRpb24qL1xyXG5jb25zdCBwb3N0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlsJyk7XHJcbmNvbnN0IG5pY2tOYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25pY2stbmFtZScpO1xyXG5jb25zdCBhZ3JlZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWdyZWVtZW50Jyk7XHJcbmNvbnN0IHBhc3N3b3JkXzEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmQtMScpO1xyXG5jb25zdCBwYXNzd29yZF8yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkLTInKTtcclxuY29uc3QgcnVsZXNCbG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtLXJlcXVpcmVtZW50X19ydWxlLWJsb2NrJyk7XHJcblxyXG5mdW5jdGlvbiBydWxlVmFsaWQoYmxvY2ssIHJ1bGUpIHtcclxuICBydWxlc0Jsb2NrW2Jsb2NrXS5jaGlsZHJlbltydWxlXS5jbGFzc0xpc3QuYWRkKCdvaycpO1xyXG4gIHJ1bGVzQmxvY2tbYmxvY2tdLmNoaWxkcmVuW3J1bGVdLmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJ1bGVJbnZhbGlkKGJsb2NrLCBydWxlKSB7XHJcbiAgcnVsZXNCbG9ja1tibG9ja10uY2hpbGRyZW5bcnVsZV0uY2xhc3NMaXN0LnJlbW92ZSgnb2snKTtcclxuICBydWxlc0Jsb2NrW2Jsb2NrXS5jaGlsZHJlbltydWxlXS5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xyXG59XHJcblxyXG5hZ3JlZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xyXG4gIGNoYW5nZUJ1dHRvbkFjY2VzcygpO1xyXG59KTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xyXG4gIGlmKGFncmVlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgZS5rZXlDb2RlID09PSBFTlRFUikge1xyXG4gICAgYWdyZWVtZW50LmNoZWNrZWQgPSAhYWdyZWVtZW50LmNoZWNrZWQ7XHJcbiAgICBjaGFuZ2VCdXR0b25BY2Nlc3MoKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8g0JLQsNC70LjQtNCw0YbQuNGPINC/0L7Rh9GC0YtcclxucG9zdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgIXBvc3QuY2hlY2tWYWxpZGl0eSgpID8gcnVsZXNCbG9ja1swXS5uZXh0RWxlbWVudFNpYmxpbmcuc3R5bGUuZGlzcGxheSA9ICdibG9jaycgOiBydWxlc0Jsb2NrWzBdLm5leHRFbGVtZW50U2libGluZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gIGNoYW5nZUJ1dHRvbkFjY2VzcygpO1xyXG59KTtcclxuXHJcbmNvbnN0IGZpcnN0U3RlcCA9IHtcclxuICBuYW1lOiBmYWxzZSxcclxuICBwYXNzd29yZDogZmFsc2VcclxufVxyXG4vLyDQktCw0LvQuNC00LDRhtC40Y8g0L3QuNC60L3QtdC50LzQsFxyXG5uaWNrTmFtZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICB2YXIgcmVnRmlyc3RTeW1ib2wgPSAvW2Etel0vaTtcclxuICB2YXIgcmVnU3RyaW5nID0gL15bYS16XzswLTldKiQvaTtcclxuICBpZihuaWNrTmFtZS52YWx1ZS5sZW5ndGggPj0gMikgIHtcclxuICAgIGZpcnN0U3RlcC5uYW1lID0gdHJ1ZTtcclxuICB9XHJcbiAgaWYoZmlyc3RTdGVwLm5hbWUpIHtcclxuICAgIG5pY2tOYW1lLnZhbHVlLmxlbmd0aCA+PSAzID8gcnVsZVZhbGlkKDEsIDApIDogcnVsZUludmFsaWQoMSwgMCk7XHJcbiAgICByZWdTdHJpbmcudGVzdChuaWNrTmFtZS52YWx1ZSkgJiYgbmlja05hbWUudmFsdWUubGVuZ3RoID8gcnVsZVZhbGlkKDEsIDEpIDogcnVsZUludmFsaWQoMSwgMSk7XHJcbiAgICByZWdGaXJzdFN5bWJvbC50ZXN0KG5pY2tOYW1lLnZhbHVlWzBdKSAmJiBuaWNrTmFtZS52YWx1ZS5sZW5ndGggPyBydWxlVmFsaWQoMSwgMikgOiBydWxlSW52YWxpZCgxLCAyKTtcclxuICB9XHJcbiAgY2hhbmdlQnV0dG9uQWNjZXNzKCk7XHJcbn0pO1xyXG5cclxuLy8g0JLQsNC70LjQtNCw0YbQuNGPINC/0LDRgNC+0LvRjyAxXHJcbnBhc3N3b3JkXzEuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgdmFyIHJlZ051bWJlciA9IC9bMC05XSsvO1xyXG4gIHZhciByZWdMZXR0ZXIgPSAvKD89LipbYS16fNCwLdGPXSkoPz0uKltBLVp80JAt0K9dKS4qJC87XHJcbiAgaWYocGFzc3dvcmRfMS52YWx1ZS5sZW5ndGggPj0gMikge1xyXG4gICAgZmlyc3RTdGVwLnBhc3N3b3JkID0gdHJ1ZTtcclxuICB9XHJcbiAgaWYoZmlyc3RTdGVwLnBhc3N3b3JkKSB7XHJcbiAgICBwYXNzd29yZF8xLnZhbHVlLmxlbmd0aCA+PSA2ID8gcnVsZVZhbGlkKDIsIDApIDogcnVsZUludmFsaWQoMiwgMCk7XHJcbiAgICByZWdOdW1iZXIudGVzdChwYXNzd29yZF8xLnZhbHVlKSA/IHJ1bGVWYWxpZCgyLCAxKSA6IHJ1bGVJbnZhbGlkKDIsIDEpO1xyXG4gICAgcmVnTGV0dGVyLnRlc3QocGFzc3dvcmRfMS52YWx1ZSkgPyBydWxlVmFsaWQoMiwgMikgOiBydWxlSW52YWxpZCgyLCAyKTtcclxuICAgIHBhc3N3b3JkXzEudmFsdWUgPT09IG5pY2tOYW1lLnZhbHVlIHx8IHBhc3N3b3JkXzEudmFsdWUgPT09IHBvc3QudmFsdWUgPyBydWxlc0Jsb2NrWzJdLm5leHRFbGVtZW50U2libGluZy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJyA6IHJ1bGVzQmxvY2tbMl0ubmV4dEVsZW1lbnRTaWJsaW5nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgfVxyXG4gIGNoYW5nZUJ1dHRvbkFjY2VzcygpO1xyXG59KTtcclxuXHJcbi8vINCf0L7QtNGC0LLQtdGA0LbQtNC10L3QuNC1INC/0LDRgNC+0LvRj1xyXG5wYXNzd29yZF8yLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gIHBhc3N3b3JkXzIudmFsdWUgIT0gcGFzc3dvcmRfMS52YWx1ZSA/IHJ1bGVzQmxvY2tbM10ubmV4dEVsZW1lbnRTaWJsaW5nLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snIDogcnVsZXNCbG9ja1szXS5uZXh0RWxlbWVudFNpYmxpbmcuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICBjaGFuZ2VCdXR0b25BY2Nlc3MoKTtcclxufSk7XHJcblxyXG5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHZhciByZXN1bHQgPSB7fTtcclxuICB2YXIgYXJyID0gW107XHJcbiAgdmFyIGRhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSk7XHJcbiAgZm9yKGxldCBba2V5LCB2YWx1ZV0gb2YgZGF0YS5lbnRyaWVzKCkpIHtcclxuICAgIGlmKGtleSA9PT0gJ3N1YnNjcmlwdGlvbicgJiYgcmVzdWx0W2tleV0pIHtcclxuICAgICAgcmVzdWx0W2tleV0gPSAocmVzdWx0W2tleV0gKyAnLCAnICsgdmFsdWUpLnNwbGl0KCcsJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gIH1cclxuICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShyZXN1bHQpKTtcclxuICBwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICBvcGVuQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxufSk7XHJcbiJdfQ==
